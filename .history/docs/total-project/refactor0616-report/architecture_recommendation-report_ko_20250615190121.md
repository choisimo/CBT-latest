# ğŸ›ï¸ ì•„í‚¤í…ì²˜ ê¶Œì¥ ë³´ê³ ì„œ: Auth-Server & CBT-back-diary

## ğŸ“– 1. ì„œë¡ 

ì´ ë³´ê³ ì„œëŠ” `Auth-Server`ì™€ `CBT-back-diary` í”„ë¡œì íŠ¸ì˜ í†µí•© ë˜ëŠ” ë¶„ë¦¬ì— ëŒ€í•œ ì•„í‚¤í…ì²˜ ê¶Œì¥ì‚¬í•­ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ ê¶Œì¥ì‚¬í•­ì€ ë‹¤ìŒ ë¬¸ì„œë“¤ì— ê¸°ë¡ëœ ì—”í‹°í‹°, ì„œë¹„ìŠ¤ ê³„ì¸µ, ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ, ë¹Œë“œ/ì„¤ì • íŒŒì¼ì— ëŒ€í•œ ìƒì„¸ ë¶„ì„ì„ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤:

```mermaid
graph TB
    subgraph "ğŸ“š ë¶„ì„ ë¬¸ì„œ"
        A[entity_comparison_report.md]
        B[service_layer_comparison_report.md]
        C[data_access_layer_comparison_report.md]
        D[dependency_config_comparison_report.md]
    end

    A --> E[ğŸ¯ ì•„í‚¤í…ì²˜ ê²°ì •]
    B --> E
    C --> E
    D --> E

    style A fill:#ffebee
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#e3f2fd
    style E fill:#fff3e0
```

**ğŸ¯ ëª©í‘œ**: ë°ì´í„° ê²°í•©ë„, ê¸°ìˆ  ìŠ¤íƒ ì •ë ¬, ìš´ì˜ ì—­ëŸ‰, í–¥í›„ ìœ ì§€ë³´ìˆ˜ì„±ì„ ê³ ë ¤í•˜ì—¬ ê°€ì¥ ì í•©í•œ ì•„í‚¤í…ì²˜ ì ‘ê·¼ ë°©ì‹(ëª¨ë†€ë¦¬ìŠ¤ ë˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤)ì„ ê²°ì •í•©ë‹ˆë‹¤.

## ğŸ“Š 2. ì£¼ìš” ë¹„êµ ë¶„ì„ ê²°ê³¼ ìš”ì•½

ì´ì „ ë¶„ì„ ë³´ê³ ì„œì—ì„œ ë„ì¶œëœ ë‹¤ìŒ í•µì‹¬ í¬ì¸íŠ¸ë“¤ì´ ì´ ê²°ì •ì— ì¤‘ìš”í•©ë‹ˆë‹¤:

### ğŸ”— ì—”í‹°í‹° ì¤‘ë³µ ë° ê²°í•©ë„

```mermaid
erDiagram
    User ||--o{ Diary : "has"
    User ||--o{ AuthProvider : "linked"
    Diary ||--o{ Report : "generates"

    User {
        string userId
        string email
        string nickname
        string role
    }

    Diary {
        string diaryId
        string userId FK
        string title
        string content
        datetime createdAt
    }

    AuthProvider {
        string providerName
        string description
        boolean isActive
    }
```

- **ğŸ”„ í•µì‹¬ ì—”í‹°í‹°**: `User`, `AuthProvider`, `Diary`ì™€ ê°™ì€ í•µì‹¬ ì—”í‹°í‹°ê°€ ë‘ í”„ë¡œì íŠ¸ì— ëª¨ë‘ ì¡´ì¬í•˜ë©°, `User`ì™€ `AuthProvider` ì—”í‹°í‹°ì—ì„œ ìƒë‹¹í•œ ì¤‘ë³µì´ ìˆìŠµë‹ˆë‹¤.
- **ğŸ“Š ê°•í•œ ì˜ì¡´ì„±**: `CBT-back-diary`ì˜ `Diary` ì—”í‹°í‹°ëŠ” `User` ì—”í‹°í‹°ì— ê°•í•œ ì˜ì¡´ì„±ì„ ê°€ì§‘ë‹ˆë‹¤(ì™¸ë˜í‚¤ `user_id`).
- **ğŸ”§ ê¸°ì¡´ ê¸°ëŠ¥**: Auth-Serverì—ë„ `Diary` ì—”í‹°í‹°, `Report` ì—”í‹°í‹°, `DiaryReportLink`ê°€ í¬í•¨ë˜ì–´ ìˆì–´, ê¸°ë³¸ ì¸ì¦ì„ ë„˜ì–´ì„œ ì¼ê¸° ê´€ë ¨ ê¸°ëŠ¥ì„ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆê±°ë‚˜ ì§„í™”í•˜ê³  ìˆìŒì„ ì‹œì‚¬í•©ë‹ˆë‹¤.

### âš™ï¸ ì„œë¹„ìŠ¤ ê³„ì¸µ ê¸°ëŠ¥

```mermaid
graph TB
    subgraph "ğŸ”· Auth-Server ì„œë¹„ìŠ¤"
        AS1[í¬ê´„ì  ì‚¬ìš©ì ê´€ë¦¬]
        AS2[OAuth2 í†µí•©<br/>Oauth2Service]
        AS3[JWT ê´€ë¦¬<br/>TokenService]
        AS4[Spring Security í†µí•©<br/>PrincipalDetailService]
        AS5[ì‚¬ìš©ì ë“±ë¡/íŒ¨ìŠ¤ì›Œë“œ ê´€ë¦¬]
    end

    subgraph "ğŸ”¶ CBT-back-diary ì„œë¹„ìŠ¤"
        CBD1[ìµœì†Œí•œì˜ ì‚¬ìš©ì ì¡°íšŒ]
        CBD2[ì¼ê¸° CRUD ì‘ì—…<br/>DiaryService]
        CBD3[Mock ì‚¬ìš©ì ID ì‚¬ìš©]
    end

    AS1 --> CBD1
    AS2 -.-> CBD3
    AS3 -.-> CBD3
    AS4 -.-> CBD1
    AS5 -.-> CBD1

    style AS1,AS2,AS3,AS4,AS5 fill:#4caf50
    style CBD1,CBD2,CBD3 fill:#ff9800
```

- **ğŸ”· Auth-Server**: OAuth2 í†µí•©(`Oauth2Service`), JWT ê´€ë¦¬(`TokenService`), Spring Security í†µí•©(`PrincipalDetailService`)ì„ í¬í•¨í•œ í¬ê´„ì ì¸ ì‚¬ìš©ì ê´€ë¦¬ ë° ì¸ì¦ ì‹œìŠ¤í…œì„ ë³´ìœ í•©ë‹ˆë‹¤.
- **ğŸ”¶ CBT-back-diary**: í˜„ì¬ `UserService`ëŠ” ìµœì†Œí•œì´ë©°, ì£¼ë¡œ (ëª¨ì˜) ì‚¬ìš©ì ì„¸ë¶€ì •ë³´ ì¡°íšŒì— ì¤‘ì ì„ ë‘¡ë‹ˆë‹¤. `DiaryService`ëŠ” í˜„ì¬ ëª¨ì˜ ì‚¬ìš©ì IDë¥¼ ì‚¬ìš©í•˜ì—¬ ì¼ê¸°ì— ëŒ€í•œ CRUD ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

### ğŸ—„ï¸ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ

```mermaid
graph LR
    subgraph "ğŸ”· Auth-Server"
        A1[QueryDSL í™œìš©]
        A2[ë³µì¡í•œ ì‚¬ìš©ì ê´€ë¦¬]
        A3[ì™¸ë¶€í™”ëœ ì„¤ì •]
    end
    
    subgraph "ğŸ”¶ CBT-back-diary"
        B1[Spring Data JPA]
        B2[íŒŒìƒ ì¿¼ë¦¬ + JPQL]
        B3[í•˜ë“œì½”ë”©ëœ ì„¤ì •]
    end
    
    subgraph "ğŸ—„ï¸ ê³µí†µ"
        C[MariaDB]
    end
    
    A1 --> C
    A2 --> C
    A3 --> C
    B1 --> C
    B2 --> C
    B3 --> C
    
    style A1,A2,A3 fill:#4caf50
    style B1,B2,B3 fill:#ff9800
    style C fill:#2196f3
```

### ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ ë° ì˜ì¡´ì„±

```mermaid
graph TD
    subgraph "ğŸ†š ë²„ì „ ì°¨ì´"
        A[Java ë²„ì „]
        B[Spring Boot ë²„ì „]
    end

    subgraph "ğŸ“š ë¼ì´ë¸ŒëŸ¬ë¦¬ ì°¨ì´"
        C[í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬]
        D[JPA ì„¤ì •]
    end

    A --> A1[Auth-Server: Java 21]
    A --> A2[CBT-back-diary: Java 17]
    
    B --> B1[Auth-Server: 3.2.4]
    B --> B2[CBT-back-diary: 3.2.0]
    
    C --> C1[Auth-Server: QueryDSL, Redis, JWT]
    C --> C2[CBT-back-diary: ê¸°ë³¸ Spring Boot ì˜ì¡´ì„±]
    
    D --> D1[Auth-Server: ddl-auto=none]
    D --> D2[CBT-back-diary: ddl-auto=update]

    style A1,B1,C1,D1 fill:#4caf50
    style A2,B2,C2,D2 fill:#ff9800
```

**ì£¼ìš” ì°¨ì´ì **:
- **Java ë²„ì „**: Auth-Server (Java 21) vs. CBT-back-diary (Java 17)
- **Spring Boot ë²„ì „**: Auth-Server (3.2.4) vs. CBT-back-diary (3.2.0) - ë‘˜ ë‹¤ 3.x ê³„ì—´ë¡œ ì–‘í˜¸
- **í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬**: Auth-ServerëŠ” QueryDSL, Redis, JWT ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
- **JPA ì„¤ì •**: Auth-ServerëŠ” `ddl-auto=none` (ìš´ì˜ì— ì•ˆì „), CBT-back-diaryëŠ” `update` (ê°œë°œì— í¸ë¦¬)

## ğŸ” 3. ì•„í‚¤í…ì²˜ ì ‘ê·¼ ë°©ì‹ í‰ê°€

### ğŸ—ï¸ 3.1. ëª¨ë†€ë¦¬ìŠ¤ í†µí•©

`CBT-back-diary` ê¸°ëŠ¥ì„ `Auth-Server`ì— í†µí•©í•˜ëŠ” ë°©ì‹ (Auth-Serverê°€ ê¸°ë°˜ìœ¼ë¡œ ë” ì™„ì „í•œ ê¸°ëŠ¥ì„ ì œê³µ).

#### âœ… ì¥ì 

```mermaid
graph TD
    A[ëª¨ë†€ë¦¬ìŠ¤ í†µí•© ì¥ì ] --> B[ğŸ”„ ì¤‘ë³µ ì œê±°]
    A --> C[ğŸ“Š ë°ì´í„° ì¼ê´€ì„± ë‹¨ìˆœí™”]
    A --> D[âš¡ ì§€ì—° ì‹œê°„ ê°ì†Œ]
    A --> E[ğŸ› ï¸ ê°œë°œ/ë°°í¬ ë‹¨ìˆœí™”]
    A --> F[ğŸ”§ Auth-Server ê°•ì  í™œìš©]
    A --> G[ğŸ”’ ì›ìì  íŠ¸ëœì­ì…˜]

    B --> B1[User/AuthProvider ì—”í‹°í‹° ì¤‘ë³µ ì œê±°]
    C --> C1[ë‹¨ì¼ DBë¡œ ê°•ë ¥í•œ íŠ¸ëœì­ì…˜ ì¼ê´€ì„±]
    D --> D1[ì§ì ‘ ë©”ì„œë“œ í˜¸ì¶œ vs API í˜¸ì¶œ]
    E --> E1[ë‹¨ì¼ ì½”ë“œë² ì´ìŠ¤ ê´€ë¦¬]
    F --> F1[OAuth2, JWT, Redis ê¸°ë°˜ ì¸í”„ë¼]
    G --> G1[ì‚¬ìš©ì-ì¼ê¸° ë°ì´í„° íŠ¸ëœì­ì…˜ ë³´ì¥]

    style A fill:#4caf50
    style B,C,D,E,F,G fill:#e8f5e8
    style B1,C1,D1,E1,F1,G1 fill:#fff3e0
```

#### âŒ ë‹¨ì 

```mermaid
graph TD
    A[ëª¨ë†€ë¦¬ìŠ¤ í†µí•© ë‹¨ì ] --> B[ğŸ”§ ê¸°ìˆ  í†µí•© ë…¸ë ¥]
    A --> C[ğŸ“ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ ë³µì¡ì„± ì¦ê°€]
    A --> D[âš–ï¸ í™•ì¥ì„± ê³¼ì œ]
    A --> E[ğŸš€ ë°°í¬ ê²½ì§ì„±]
    A --> F[ğŸ¯ CBT ë‹¨ìˆœì„± ì†ì‹¤]

    B --> B1[Java ë²„ì „ í†µì¼ í•„ìš”]
    B --> B2[ì—”í‹°í‹° ì¶©ëŒ í•´ê²°]
    C --> C1[ë” í¬ê³  ë³µì¡í•œ ì‹œìŠ¤í…œ]
    D --> D1[ê°œë³„ ì„œë¹„ìŠ¤ ë…ë¦½ í™•ì¥ ì–´ë ¤ì›€]
    E --> E1[ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ë°°í¬ í•„ìš”]
    F --> F1[ë‹¨ìˆœí•œ ì„œë¹„ìŠ¤ì˜ ë³µì¡ì„± ì¦ê°€]

    style A fill:#f44336
    style B,C,D,E,F fill:#ffebee
    style B1,B2,C1,D1,E1,F1 fill:#fce4ec
```

### ğŸ”— 3.2. ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë¶„ë¦¬

`Auth-Server`ì™€ `CBT-back-diary`ë¥¼ APIë¥¼ í†µí•´ í†µì‹ í•˜ëŠ” ë³„ë„ ì„œë¹„ìŠ¤ë¡œ ìœ ì§€í•˜ëŠ” ë°©ì‹.

#### âœ… ì¥ì 

```mermaid
graph TD
    A[ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì¥ì ] --> B[ğŸ¯ ê´€ì‹¬ì‚¬ ë¶„ë¦¬]
    A --> C[ğŸš€ ë…ë¦½ì  ê°œë°œ/ë°°í¬]
    A --> D[ğŸ”§ ê¸°ìˆ  ë‹¤ì–‘ì„±]
    A --> E[ğŸ“ˆ ë…ë¦½ì  í™•ì¥ì„±]
    A --> F[ğŸ›¡ï¸ ì¥ì•  ê²©ë¦¬]
    A --> G[ğŸ¨ CBT ë‹¨ìˆœì„± ìœ ì§€]

    B --> B1[ì¸ì¦/ì‚¬ìš©ì ê´€ë¦¬ vs ì¼ê¸° ê¸°ëŠ¥]
    C --> C1[íŒ€ë³„ ë…ë¦½ì  ì‘ì—… ê°€ëŠ¥]
    D --> D1[ê°œë³„ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ ê´€ë¦¬]
    E --> E1[ì„œë¹„ìŠ¤ë³„ ë¶€í•˜ ê¸°ë°˜ í™•ì¥]
    F --> F1[í•œ ì„œë¹„ìŠ¤ ì¥ì• ê°€ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ ìµœì†Œí™”]
    G --> G1[API í˜¸ì¶œì„ í†µí•œ ë‹¨ìˆœí•œ êµ¬ì¡° ìœ ì§€]

    style A fill:#2196f3
    style B,C,D,E,F,G fill:#e3f2fd
    style B1,C1,D1,E1,F1,G1 fill:#fff3e0
```

#### âŒ ë‹¨ì 

```mermaid
graph TD
    A[ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë‹¨ì ] --> B[ğŸŒ ì„œë¹„ìŠ¤ ê°„ í†µì‹  ì˜¤ë²„í—¤ë“œ]
    A --> C[ğŸ”„ ë°ì´í„° ì¼ê´€ì„± ê³¼ì œ]
    A --> D[ğŸ”§ ì¤‘ë³µëœ ëª¨ë¸/DTO]
    A --> E[âš¡ ë¶„ì‚° íŠ¸ëœì­ì…˜]
    A --> F[ğŸ› ï¸ ìš´ì˜ ë³µì¡ì„±]
    A --> G[ğŸ”’ API ê³„ì•½ ê´€ë¦¬]
    A --> H[ğŸ›¡ï¸ ë³´ì•ˆ ë³µì¡ì„±]

    B --> B1[ë„¤íŠ¸ì›Œí¬ ì§€ì—° ì‹œê°„ ë° ë³µì¡ì„±]
    C --> C1[ì„œë¹„ìŠ¤ ê°„ ë°ì´í„° ë™ê¸°í™” ì–´ë ¤ì›€]
    D --> D1[User ì •ë³´ ì¤‘ë³µ í‘œí˜„ í•„ìš”]
    E --> E1[ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ê±¸ì¹œ íŠ¸ëœì­ì…˜ ê´€ë¦¬]
    F --> F1[ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬, ë¡œë“œë°¸ëŸ°ì‹± ë“±]
    G --> G1[API ë²„ì „ ê´€ë¦¬ ë° í˜¸í™˜ì„±]
    H --> H1[ì„œë¹„ìŠ¤ ê°„ í†µì‹  ë³´ì•ˆ ê³„ì¸µ]

    style A fill:#f44336
    style B,C,D,E,F,G,H fill:#ffebee
    style B1,C1,D1,E1,F1,G1,H1 fill:#fce4ec
```

## ğŸ¯ 4. ê¶Œì¥ì‚¬í•­

### âœ… **ê¶Œì¥ì‚¬í•­: Auth-Serverë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ëª¨ë†€ë¦¬ìŠ¤ í†µí•©**

#### ğŸ“‹ ê·¼ê±°

```mermaid
graph TD
    A[ê¶Œì¥ ê·¼ê±°] --> B[ğŸ”— ê°•í•œ ë°ì´í„° ê²°í•©]
    A --> C[ğŸ›ï¸ í•µì‹¬ ê¸°ëŠ¥ ì¤‘ì•™í™”]
    A --> D[âš–ï¸ ìš´ì˜ ë³µì¡ì„± ê°ì†Œ]
    A --> E[ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ ì •ë ¬]
    A --> F[ğŸ”„ ì¤‘ë³µ í•´ê²°]
    A --> G[ğŸ“Š ê¸°ì¡´ ì¼ê¸° ê´€ë ¨ ì—”í‹°í‹°]

    B --> B1[Diary-User ì—”í‹°í‹° ê°„ ë³¸ì§ˆì  ì—°ê²°]
    C --> C1[ì„±ìˆ™í•œ OAuth2, JWT, ì¸ì¦ ì¸í”„ë¼]
    D --> D1[í˜„ì¬ ê·œëª¨ì—ì„œ ë‹¨ì¼ ëª¨ë†€ë¦¬ìŠ¤ê°€ ë” ê°„ë‹¨]
    E --> E1[Spring Boot + MariaDB ê³µí†µ ê¸°ë°˜]
    F --> F1[User/AuthProvider ì—”í‹°í‹° ì¤‘ë³µ ì§ì ‘ í•´ê²°]
    G --> G1[Auth-Serverì˜ ê¸°ì¡´ Diary/Report ì—”í‹°í‹°]

    style A fill:#4caf50
    style B,C,D,E,F,G fill:#e8f5e8
    style B1,C1,D1,E1,F1,G1 fill:#fff3e0
```

1. **ğŸ”— ê°•í•œ ë°ì´í„° ê²°í•©**: `CBT-back-diary`ì˜ `Diary` ê¸°ëŠ¥ì´ ë³¸ì§ˆì ìœ¼ë¡œ `User` ì—”í‹°í‹°ì™€ ì—°ê²°ë˜ì–´ ìˆì–´, ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°„ ì´ ê´€ê³„ë¥¼ ê´€ë¦¬í•˜ë©´ API í˜¸ì¶œ, ë°ì´í„° ë™ê¸°í™”, íŠ¸ëœì­ì…˜ ë¬´ê²°ì„± ì¸¡ë©´ì—ì„œ ìƒë‹¹í•œ ë³µì¡ì„±ì´ ë°œìƒí•©ë‹ˆë‹¤.

2. **ğŸ›ï¸ í•µì‹¬ ê¸°ëŠ¥ ì¤‘ì•™í™”**: `Auth-Server`ê°€ ì‚¬ìš©ì ê´€ë¦¬, ì¸ì¦(OAuth2, JWT), ê¶Œí•œ ë¶€ì—¬ì— ëŒ€í•œ ë” ì„±ìˆ™í•˜ê³  ê¸°ëŠ¥ì´ í’ë¶€í•œ í”Œë«í¼ì„ ì œê³µí•©ë‹ˆë‹¤.

3. **âš–ï¸ ìš´ì˜ ë³µì¡ì„± ê°ì†Œ**: í˜„ì¬ ì„¤ì •ì€ ë‘ ê°œì˜ ë°€ì ‘í•˜ê²Œ ê´€ë ¨ëœ ë„ë©”ì¸ì„ ì œì•ˆí•©ë‹ˆë‹¤. ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì˜ˆìƒ ê·œëª¨ì—ì„œëŠ” ì˜ êµ¬ì¡°í™”ëœ ë‹¨ì¼ ëª¨ë†€ë¦¬ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ë¶„ì‚° ì‹œìŠ¤í…œì˜ ë³µì¡ì„±ì„ ìˆ˜ë°˜í•˜ëŠ” ë‘ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒë³´ë‹¤ ìš´ì˜ìƒ ë” ê°„ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

4. **ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ ì •ë ¬**: 
   - ë‘ í”„ë¡œì íŠ¸ ëª¨ë‘ Spring Bootì™€ MariaDBë¥¼ ì‚¬ìš©
   - Spring Boot ë²„ì „(3.2.4ì™€ 3.2.0)ì´ ë§¤ìš° ê°€ê¹ê³  ë™ì¼í•œ ì£¼ ë²„ì „(3.x)
   - Java ë²„ì „ ì°¨ì´(21 vs. 17)ëŠ” Java 21ë¡œ í‘œì¤€í™”í•˜ì—¬ ê´€ë¦¬ ê°€ëŠ¥

5. **ğŸ”„ ì¤‘ë³µ í•´ê²°**: ëª¨ë†€ë¦¬ì‹ ì ‘ê·¼ ë°©ì‹ì€ `User` ë° `AuthProvider` ì—”í‹°í‹°ì™€ ê´€ë ¨ ë¡œì§ì˜ ì¤‘ë³µì„ ì§ì ‘ì ìœ¼ë¡œ í•´ê²°í•©ë‹ˆë‹¤.

6. **ğŸ“Š Auth-Serverì˜ ê¸°ì¡´ ì¼ê¸° ê´€ë ¨ ì—”í‹°í‹°**: Auth-Serverì— `Diary`, `Report`, `DiaryReportLink` ì—”í‹°í‹°ê°€ ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì€ ì´ë¯¸ ìˆœìˆ˜ ì¸ì¦ì„ ë„˜ì–´ì„œëŠ” ê¸°ëŠ¥ì„ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆê±°ë‚˜ ì§„í™”í•˜ê³  ìˆìŒì„ ì‹œì‚¬í•©ë‹ˆë‹¤.

### ğŸ› ï¸ í†µí•© ì „ëµ (ëª¨ë†€ë¦¬ìŠ¤ ì„ íƒ ì‹œ)

```mermaid
graph TB
    A[í†µí•© ì „ëµ] --> B[ğŸ“ ê¸°ë°˜ í”„ë¡œì íŠ¸]
    A --> C[ğŸ“Š Diary ê¸°ëŠ¥ ë³‘í•©]
    A --> D[âš™ï¸ ì„¤ì • ì •ë ¬]
    A --> E[ğŸ”§ ì˜ì¡´ì„± ê´€ë¦¬]

    B --> B1[Auth-Serverë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©]
    B --> B2[í¬ê´„ì ì¸ ë³´ì•ˆ/ì‚¬ìš©ì ê´€ë¦¬ ì¸í”„ë¼]

    C --> C1[Diary ì—”í‹°í‹° ì‹ ì¤‘í•œ ë¶„ì„ ë° í†µí•©]
    C --> C2[DiaryService ë¡œì§ ë§ˆì´ê·¸ë ˆì´ì…˜]
    C --> C3[DiaryRepository ì¶”ê°€/ë³‘í•©]

    D --> D1[Java 21 ë° Spring Boot 3.2.4 í‘œì¤€í™”]
    D --> D2[ddl-auto=none ì •ì±… ì±„íƒ]
    D --> D3[ì™¸ë¶€í™”ëœ ì„¤ì • ì ‘ê·¼ ë°©ì‹]

    E --> E1[CBT-back-diary ì˜ì¡´ì„± Auth-Serverì— ì¶”ê°€]
    E --> E2[build.gradle í†µí•©]

    style A fill:#2196f3
    style B,C,D,E fill:#e3f2fd
    style B1,B2,C1,C2,C3,D1,D2,D3,E1,E2 fill:#fff3e0
```

#### ğŸ“ ê¸°ë°˜ í”„ë¡œì íŠ¸
- **Auth-Server**ë¥¼ ê¸°ë°˜ í”„ë¡œì íŠ¸ë¡œ ì‚¬ìš© (í¬ê´„ì ì¸ ë³´ì•ˆ ë° ì‚¬ìš©ì ê´€ë¦¬ ì¸í”„ë¼ ë•Œë¬¸)

#### ğŸ“Š Diary ê¸°ëŠ¥ ë³‘í•©
- CBT-back-diaryì˜ `Diary` ì—”í‹°í‹°ì™€ Auth-Serverì˜ `Diary` ì—”í‹°í‹°ë¥¼ ì‹ ì¤‘íˆ ë¶„ì„í•˜ì—¬ í†µí•© ëª¨ë¸ ê²°ì •
- `DiaryService` ë¡œì§ì„ Auth-Serverë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ì—¬ Auth-Serverì˜ `User` ì—”í‹°í‹°ì™€ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì§ì ‘ ì‚¬ìš©
- Diary ê´€ë ¨ ë¦¬í¬ì§€í† ë¦¬(`DiaryRepository`)ë¥¼ Auth-Serverì— ì¶”ê°€í•˜ê±°ë‚˜ ë³‘í•©

#### âš™ï¸ ì„¤ì • ì •ë ¬
- Java 21 ë° Spring Boot 3.2.4 (ë˜ëŠ” ìµœì‹  ì•ˆì • 3.x ë²„ì „)ë¡œ í‘œì¤€í™”
- Auth-Serverì˜ `ddl-auto=none` ì •ì±… ì±„íƒ ë° ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ êµ¬í˜„ (Flyway ë˜ëŠ” Liquibase ì‚¬ìš©)
- Auth-Serverì˜ ì™¸ë¶€í™”ëœ ì„¤ì • ì ‘ê·¼ ë°©ì‹ì„ ëª¨ë¸ë¡œ í•œ `application.properties` í†µí•©

#### ğŸ”§ ì˜ì¡´ì„± ê´€ë¦¬
- CBT-back-diaryì˜ í•„ìš”í•œ ì˜ì¡´ì„±(Auth-Serverì— ì•„ì§ ì—†ëŠ” ê²½ìš°)ì„ Auth-Serverì˜ `build.gradle`ì— ì¶”ê°€

### ğŸ¤” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê³ ë ¤ì‚¬í•­ (ëª¨ë†€ë¦¬ìŠ¤ê°€ ì„ íƒë˜ì§€ ì•ŠëŠ” ê²½ìš°)

ê¶Œì¥ì‚¬í•­ì—ë„ ë¶ˆêµ¬í•˜ê³  ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì ‘ê·¼ ë°©ì‹ì„ ì¶”êµ¬í•˜ëŠ” ê²½ìš°, ë‹¤ìŒ ì‚¬í•­ë“¤ì´ ì¤‘ìš”í•©ë‹ˆë‹¤:

```mermaid
graph TD
    A[ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í•„ìˆ˜ ì‚¬í•­] --> B[ğŸ“‹ API ê³„ì•½]
    A --> C[ğŸ‘¥ ê³µìœ  ì‚¬ìš©ì ëª¨ë¸]
    A --> D[ğŸ” ì¸ì¦ í”Œë¡œìš°]
    A --> E[ğŸ”„ ë°ì´í„° ë™ê¸°í™”]

    B --> B1[ëª…í™•í•˜ê³  ë²„ì „ ê´€ë¦¬ëœ API ê³„ì•½ ì •ì˜]
    C --> C2[ì¼ê´€ì„±ì„ ìœ„í•œ ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬/DTO]
    D --> D1[CBT-back-diaryì— JWT/OAuth í´ë¼ì´ì–¸íŠ¸ ì¶”ê°€]
    E --> E1[ì™¸ë˜í‚¤/ìºì‹±ì„ ìœ„í•œ ë°ì´í„° ë™ê¸°í™” ì „ëµ]

    style A fill:#ff9800
    style B,C,D,E fill:#fff3e0
    style B1,C2,D1,E1 fill:#fce4ec
```

**ğŸ“‹ API ê³„ì•½**: ì‚¬ìš©ì ì¸ì¦, ê¶Œí•œ ë¶€ì—¬, í•„ìš”í•œ ì‚¬ìš©ì ì •ë³´ ê²€ìƒ‰ì„ ìœ„í•œ Auth-Serverì™€ CBT-back-diary ê°„ì˜ ëª…í™•í•˜ê³  ë²„ì „ ê´€ë¦¬ëœ API ê³„ì•½ ì •ì˜

**ğŸ‘¥ ê³µìœ  ì‚¬ìš©ì ëª¨ë¸**: ë¶ˆì¼ì¹˜ë¥¼ í”¼í•˜ê¸° ìœ„í•œ ì‚¬ìš©ì í‘œí˜„ì„ ìœ„í•œ ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ ë˜ëŠ” ëª…í™•í•œ DTO ìƒì„±

**ğŸ” ì¸ì¦ í”Œë¡œìš°**: CBT-back-diaryì— í† í° ê²€ì¦ ë° ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸ë¥¼ ìœ„í•œ Auth-Serverì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ê°•ë ¥í•œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë¡œì§ êµ¬í˜„

**ğŸ”„ ë°ì´í„° ë™ê¸°í™”**: CBT-back-diaryì—ì„œ ë¡œì»¬ë¡œ í•„ìš”í•  ìˆ˜ ìˆëŠ” ì‚¬ìš©ì ë°ì´í„° ì²˜ë¦¬ ì „ëµ (ì™¸ë˜í‚¤ ì œì•½ì´ë‚˜ ë¡œì»¬ ìºì‹±ì„ ìœ„í•´)

---

## ğŸ’¡ ê²°ë¡ 

ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ í•œ ê¸´ë°€í•œ ê²°í•©ê³¼ Auth-Serverì˜ ê¸°ì¡´ í¬ê´„ì  ê¸°ëŠ¥ì„ ê³ ë ¤í•  ë•Œ, **ëª¨ë†€ë¦¬ìŠ¤ë¡œì˜ ë³‘í•©ì´ í˜„ì¬ ë‹¨ê³„ì—ì„œ ì´ ë‘ êµ¬ì„± ìš”ì†Œì— ëŒ€í•´ ë” ì‹¤ìš©ì ì´ê³  íš¨ìœ¨ì ì¸ ì ‘ê·¼ ë°©ì‹**ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.

```mermaid
graph LR
    A[í˜„ì¬ ìƒíƒœ] --> B[ê¶Œì¥ ë°©í–¥]
    B --> C[ìµœì¢… ê²°ê³¼]

    A1[Auth-Server<br/>CBT-back-diary<br/>ë¶„ë¦¬ëœ ìƒíƒœ] --> B1[ëª¨ë†€ë¦¬ìŠ¤ í†µí•©<br/>Auth-Server ê¸°ë°˜]
    B1 --> C1[í†µí•©ëœ í”Œë«í¼<br/>ì¤‘ë³µ ì œê±°<br/>ìš´ì˜ ë‹¨ìˆœí™”]

    style A1 fill:#ffebee
    style B1 fill:#e3f2fd
    style C1 fill:#e8f5e8
```
