# ğŸ›ï¸ ì•„í‚¤í…ì²˜ ê¶Œì¥ ë³´ê³ ì„œ: Auth-Server & CBT-back-diary

## 1. ğŸ“– ì„œë¡ 

ì´ ë³´ê³ ì„œëŠ” `Auth-Server`ì™€ `CBT-back-diary` í”„ë¡œì íŠ¸ì˜ í†µí•© ë˜ëŠ” ë¶„ë¦¬ì— ëŒ€í•œ ì•„í‚¤í…ì²˜ ê¶Œì¥ì‚¬í•­ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ ê¶Œì¥ì‚¬í•­ì€ ë‹¤ìŒ ë¬¸ì„œë“¤ì— ê¸°ë¡ëœ ìƒì„¸ ë¶„ì„ì„ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤:

```mermaid
graph TB
    subgraph "ğŸ“Š ë¶„ì„ ê¸°ë°˜ ë¬¸ì„œ"
        A[ì—”í‹°í‹° ë¹„êµ ë³´ê³ ì„œ]
        B[ì„œë¹„ìŠ¤ ê³„ì¸µ ë¹„êµ ë³´ê³ ì„œ]
        C[ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ ë¹„êµ ë³´ê³ ì„œ]
        D[ì˜ì¡´ì„± êµ¬ì„± ë¹„êµ ë³´ê³ ì„œ]
    end

    subgraph "ğŸ¯ ê²°ì • ìš”ì†Œ"
        E[ë°ì´í„° ê²°í•©ë„]
        F[ê¸°ìˆ  ìŠ¤íƒ ì •ë ¬]
        G[ìš´ì˜ ì—­ëŸ‰]
        H[ìœ ì§€ë³´ìˆ˜ì„±]
    end

    A --> E
    B --> F
    C --> G
    D --> H

    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style C fill:#fff3e0
    style D fill:#e8f5e8
    style E fill:#fce4ec
    style F fill:#f1f8e9
    style G fill:#fff8e1
    style H fill:#ffebee
```

**ğŸ“‹ ë¶„ì„ ë¬¸ì„œ ëª©ë¡:**

- `entity_comparison_report.md`
- `service_layer_comparison_report.md`
- `data_access_layer_comparison_report.md`
- `dependency_config_comparison_report.md`

**ğŸ¯ ëª©í‘œ**: ë°ì´í„° ê²°í•©ë„, ê¸°ìˆ  ìŠ¤íƒ ì •ë ¬, ìš´ì˜ ì—­ëŸ‰, í–¥í›„ ìœ ì§€ë³´ìˆ˜ì„±ì„ ê³ ë ¤í•˜ì—¬ ê°€ì¥ ì í•©í•œ ì•„í‚¤í…ì²˜ ì ‘ê·¼ ë°©ì‹(ëª¨ë†€ë¦¬ìŠ¤ ë˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤)ì„ ê²°ì •í•©ë‹ˆë‹¤.

## 2. ğŸ“Š ì£¼ìš” ë¹„êµ ë¶„ì„ ê²°ê³¼ ìš”ì•½

ì´ì „ ë¶„ì„ ë³´ê³ ì„œì—ì„œ ë„ì¶œëœ ê²°ì •ì— ì¤‘ìš”í•œ í•µì‹¬ í¬ì¸íŠ¸ë“¤:

### ğŸ”— ì—”í‹°í‹° ì¤‘ë³µ ë° ê²°í•©ë„

```mermaid
erDiagram
    Auth-Server {
        User ||--o{ Diary : "owns"
        User ||--o{ AuthProvider : "has"
        Diary ||--o{ Report : "generates"
        Report ||--o{ DiaryReportLink : "links"
    }

    CBT-back-diary {
        User ||--o{ Diary : "creates"
        Diary {
            string user_id "FK"
        }
    }
```

**ğŸ” ì£¼ìš” ë°œê²¬ì‚¬í•­:**

- **ì¤‘ë³µ ì—”í‹°í‹°**: `User`, `AuthProvider`, `Diary`ì™€ ê°™ì€ í•µì‹¬ ì—”í‹°í‹°ê°€ ì–‘ìª½ í”„ë¡œì íŠ¸ì— ì¡´ì¬
- **ê°•í•œ ì˜ì¡´ì„±**: `CBT-back-diary`ì˜ `Diary` ì—”í‹°í‹°ê°€ `User` ì—”í‹°í‹°ì— ê°•í•œ ì˜ì¡´ì„± (ì™¸ë˜ í‚¤ `user_id`)
- **ê¸°ëŠ¥ í™•ì¥ ì§•í›„**: Auth-Serverì— ì´ë¯¸ `Diary`, `Report`, `DiaryReportLink` ì—”í‹°í‹° ì¡´ì¬

### âš™ï¸ ì„œë¹„ìŠ¤ ê³„ì¸µ ê¸°ëŠ¥ì„±

```mermaid
graph TB
    subgraph "ğŸ” Auth-Server ì„œë¹„ìŠ¤ ìƒíƒœê³„"
        A[UserService<br/>âœ… í¬ê´„ì  ì‚¬ìš©ì ê´€ë¦¬]
        B[Oauth2Service<br/>âœ… OAuth2 í†µí•©]
        C[TokenService<br/>âœ… JWT ê´€ë¦¬]
        D[PrincipalDetailService<br/>âœ… Spring Security í†µí•©]
        E[ê¸°ì¡´ ì¸ì¦/ê¶Œí•œ ì¸í”„ë¼]
    end

    subgraph "ğŸ“š CBT-back-diary ì„œë¹„ìŠ¤"
        F[UserService<br/>âš ï¸ ìµœì†Œí•œì˜ ê¸°ëŠ¥]
        G[DiaryService<br/>âœ… CRUD ì‘ì—…]
        H[Mock ì‚¬ìš©ì ID ì‚¬ìš©]
    end

    A --> E
    B --> E
    C --> E
    D --> E
    F --> H
    G --> H

    style A fill:#4caf50,color:#fff
    style B fill:#4caf50,color:#fff
    style C fill:#4caf50,color:#fff
    style D fill:#4caf50,color:#fff
    style E fill:#2196f3,color:#fff
    style F fill:#ff9800,color:#fff
    style G fill:#ff9800,color:#fff
    style H fill:#f44336,color:#fff
```

**ğŸ“ˆ ì„œë¹„ìŠ¤ ì„±ìˆ™ë„ ë¹„êµ:**

| ì˜ì—­            | ğŸ” Auth-Server                               | ğŸ“š CBT-back-diary  |
| --------------- | -------------------------------------------- | ------------------ |
| **ì‚¬ìš©ì ê´€ë¦¬** | âœ… ì™„ì „í•œ ë“±ë¡, ë¹„ë°€ë²ˆí˜¸ ì—…ë°ì´íŠ¸, ì¤‘ë³µ í™•ì¸ | âš ï¸ ê¸°ë³¸ì ì¸ ì¡°íšŒë§Œ |
| **ì¸ì¦**        | âœ… OAuth2, JWT, Spring Security              | âŒ ì—†ìŒ            |
| **ë³´ì•ˆ**        | âœ… í¬ê´„ì  ë³´ì•ˆ ì²´ê³„                          | âŒ Mock ì‚¬ìš©ì ID  |
| **ì¼ê¸° ê¸°ëŠ¥**   | âš ï¸ ê¸°ë³¸ ì—”í‹°í‹° ì¡´ì¬                          | âœ… ì™„ì „í•œ CRUD     |

### ğŸ—„ï¸ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ

```mermaid
graph LR
    subgraph "ğŸ” Auth-Server ë°ì´í„° ê³„ì¸µ"
        A[QueryDSL<br/>ë³µì¡í•œ ì¿¼ë¦¬]
        B[Spring Data JPA<br/>í‘œì¤€ ì‘ì—…]
        C[Custom Repository<br/>ì‚¬ìš©ì ê´€ë¦¬ íŠ¹í™”]
    end

    subgraph "ğŸ“š CBT-back-diary ë°ì´í„° ê³„ì¸µ"
        D[Spring Data JPA<br/>íŒŒìƒ ì¿¼ë¦¬]
        E[JPQL<br/>ì»¤ìŠ¤í…€ ì¿¼ë¦¬]
        F[ê¸°ë³¸ Repository<br/>ì¼ê¸° CRUD]
    end

    A --> C
    B --> C
    D --> F
    E --> F

    style A fill:#6200ea,color:#fff
    style B fill:#3f51b5,color:#fff
    style C fill:#2196f3,color:#fff
    style D fill:#ff9800,color:#fff
    style E fill:#ff5722,color:#fff
    style F fill:#795548,color:#fff
```

### ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ ë° ì˜ì¡´ì„±

```mermaid
graph TB
    subgraph "ğŸ” Auth-Server ê¸°ìˆ  ìŠ¤íƒ"
        A[Java 21<br/>ìµœì‹  LTS]
        B[Spring Boot 3.2.4<br/>ìµœì‹  ì•ˆì •í™”]
        C[QueryDSL<br/>íƒ€ì… ì•ˆì „ ì¿¼ë¦¬]
        D[Redis<br/>í† í° ê´€ë¦¬]
        E[JWT<br/>ì¸ì¦ í† í°]
        F[ddl-auto: none<br/>í”„ë¡œë•ì…˜ ì•ˆì „]
    end

    subgraph "ğŸ“š CBT-back-diary ê¸°ìˆ  ìŠ¤íƒ"
        G[Java 17<br/>ì´ì „ LTS]
        H[Spring Boot 3.2.0<br/>ì•½ê°„ ì´ì „ ë²„ì „]
        I[ê¸°ë³¸ JPA<br/>í‘œì¤€ ê¸°ëŠ¥ë§Œ]
        J[Redis ì—†ìŒ<br/>ì„¸ì…˜ ê´€ë¦¬ ë¶€ì¬]
        K[JWT ì—†ìŒ<br/>ë³´ì•ˆ í† í° ë¶€ì¬]
        L[ddl-auto: update<br/>ê°œë°œ í¸ì˜]
    end

    A -.-> G
    B -.-> H
    C -.-> I
    D -.-> J
    E -.-> K
    F -.-> L

    style A fill:#ed8b00,color:#fff
    style B fill:#6db33f,color:#fff
    style C fill:#4DB33D,color:#fff
    style D fill:#DC382D,color:#fff
    style E fill:#000000,color:#fff
    style F fill:#4caf50,color:#fff
    style G fill:#ed8b00,color:#fff
    style H fill:#6db33f,color:#fff
    style I fill:#007acc,color:#fff
    style J fill:#cccccc,color:#000
    style K fill:#cccccc,color:#000
    style L fill:#ff9800,color:#fff
```

## 3. ğŸ” ì•„í‚¤í…ì²˜ ì ‘ê·¼ ë°©ì‹ í‰ê°€

### 3.1. ğŸ¢ ëª¨ë†€ë¦¬ìŠ¤ í†µí•©

`CBT-back-diary` ê¸°ëŠ¥ì„ `Auth-Server`ì— í†µí•© (ë˜ëŠ” ê·¸ ë°˜ëŒ€, ë‹¨ Auth-Serverê°€ ë” ê¸°ëŠ¥ ì™„ì„±ë„ê°€ ë†’ì€ ë² ì´ìŠ¤ë¡œ ë³´ì„)

```mermaid
graph TB
    subgraph "ğŸ”— í†µí•©ëœ ëª¨ë†€ë¦¬ìŠ¤ ì‹œìŠ¤í…œ"
        A[í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜]
        B[í†µí•©ëœ Auth-Server<br/>+ Diary ê¸°ëŠ¥]

        subgraph "ğŸ› ï¸ í†µí•© ì„œë¹„ìŠ¤ ê³„ì¸µ"
            C[User Management]
            D[Authentication & Authorization]
            E[Diary Management]
            F[Report & Analytics]
        end

        G[ë‹¨ì¼ MariaDB ì¸ìŠ¤í„´ìŠ¤]
        H[Redis ìºì‹œ & ì„¸ì…˜]
    end

    A --> B
    B --> C
    B --> D
    B --> E
    B --> F
    C --> G
    D --> H
    E --> G
    F --> G

    style A fill:#61dafb,color:#000
    style B fill:#6db33f,color:#fff
    style C fill:#4caf50,color:#fff
    style D fill:#2196f3,color:#fff
    style E fill:#ff9800,color:#fff
    style F fill:#9c27b0,color:#fff
    style G fill:#4479a1,color:#fff
    style H fill:#DC382D,color:#fff
```

#### âœ… ì¥ì 

| ğŸ’š ì¥ì                    | ğŸ“ ìƒì„¸ ì„¤ëª…                                                                                        | ğŸ¯ ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜                     |
| ------------------------- | --------------------------------------------------------------------------------------------------- | ------------------------------------ |
| **ì¤‘ë³µ ì œê±°**             | ì¤‘ë³µëœ `User`, `AuthProvider` ì—”í‹°í‹° ë° ì¤‘ë³µ ì‚¬ìš©ì ê´€ë¦¬ ë¡œì§ ì œê±°                                  | ê°œë°œ íš¨ìœ¨ì„± í–¥ìƒ, ìœ ì§€ë³´ìˆ˜ ë¹„ìš© ì ˆê° |
| **ë°ì´í„° ì¼ê´€ì„± ë‹¨ìˆœí™”**  | ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ê°•ë ¥í•œ íŠ¸ëœì­ì…˜ ì¼ê´€ì„± ë³´ì¥, ë³µì¡í•œ ë°ì´í„° ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜ ë¶ˆí•„ìš”               | ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥, ë²„ê·¸ ìœ„í—˜ ê°ì†Œ   |
| **ì§€ì—° ì‹œê°„ ê°ì†Œ**        | ì‚¬ìš©ìì™€ ì¼ê¸° ë°ì´í„°ê°€ í•„ìš”í•œ ì‘ì—…ì—ì„œ ì§ì ‘ ë©”ì„œë“œ í˜¸ì¶œì´ ì„œë¹„ìŠ¤ ê°„ API í˜¸ì¶œë³´ë‹¤ ë¹ ë¦„               | ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ, ì‘ë‹µ ì†ë„ ê°œì„      |
| **ê°œë°œ/ë°°í¬ ë‹¨ìˆœí™”**      | ë‹¨ì¼ ì½”ë“œë² ì´ìŠ¤ë¡œ ê´€ë¦¬, ë¹Œë“œ, ë°°í¬ê°€ ìš©ì´ (íŠ¹íˆ ì†Œê·œëª¨ íŒ€ì´ë‚˜ ì´ˆê¸° í”„ë¡œì íŠ¸ ë‹¨ê³„)                   | ìš´ì˜ ë³µì¡ì„± ê°ì†Œ, ì¶œì‹œ ì‹œê°„ ë‹¨ì¶•     |
| **Auth-Server ê°•ì  í™œìš©** | ì„±ìˆ™í•œ ì¸ì¦, ê¶Œí•œ ë¶€ì—¬(OAuth2, JWT, Redis ê¸°ë°˜ í† í° ê´€ë¦¬), ì‚¬ìš©ì ê´€ë¦¬ ê¸°ëŠ¥ì„ ì¼ê¸° ê¸°ëŠ¥ì´ ì§ì ‘ í™œìš© | ë³´ì•ˆ ê°•í™”, ê¸°ëŠ¥ ì¬ì‚¬ìš©ì„± ì¦ëŒ€        |
| **ì›ìì  íŠ¸ëœì­ì…˜**       | ì‚¬ìš©ìì™€ ì¼ê¸° ë°ì´í„°ë¥¼ í¬ê´„í•˜ëŠ” ì‘ì—…ì„ ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬ ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥   | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹ ë¢°ì„± í–¥ìƒ            |

#### âŒ ë‹¨ì 

| ğŸ”´ ë‹¨ì                         | ğŸ“ ìƒì„¸ ì„¤ëª…                                                                                                | âš ï¸ ìœ„í—˜ ìš”ì†Œ                                   |
| ------------------------------ | ----------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
| **ê¸°ìˆ  í†µí•© ë…¸ë ¥**             | Java ë²„ì „ í†µì¼(21 vs 17), Spring Boot ë²„ì „ ì •ë ¬, `Diary` ì—”í‹°í‹° ì¶©ëŒ í•´ê²°, `ddl-auto` ì •ì±… í†µì¼             | ì´ˆê¸° í†µí•© ë¹„ìš©, ê°œë°œ ì¼ì • ì§€ì—° ê°€ëŠ¥ì„±          |
| **ì• í”Œë¦¬ì¼€ì´ì…˜ ë³µì¡ì„± ì¦ê°€**   | ë” í¬ê³  ë³µì¡í•œ ëª¨ë†€ë¦¬ìŠ¤ë¡œ ì¸í•œ ë¹Œë“œ ì‹œê°„ ì¦ê°€, ì „ì²´ ì‹œìŠ¤í…œ ì´í•´ ë‚œì´ë„ ìƒìŠ¹                                 | ê°œë°œì ì˜¨ë³´ë”© ì‹œê°„ ì¦ê°€, ì½”ë“œ í’ˆì§ˆ ê´€ë¦¬ ì–´ë ¤ì›€ |
| **í™•ì¥ì„± ë„ì „**                | íŠ¹ì • ë¶€ë¶„(ì¼ê¸° ì„œë¹„ìŠ¤ vs ì¸ì¦ ì„œë¹„ìŠ¤)ì˜ ë…ë¦½ì  í™•ì¥ ì–´ë ¤ì›€, ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í•¨ê»˜ í™•ì¥í•´ì•¼ í•¨            | ë¦¬ì†ŒìŠ¤ ë¹„íš¨ìœ¨ì„±, ì„±ëŠ¥ ë³‘ëª© ê°€ëŠ¥ì„±              |
| **ë°°í¬ ê²½ì§ì„±**                | ëª¨ë†€ë¦¬ìŠ¤ì˜ ì–´ë–¤ ë¶€ë¶„ì´ë“  ë³€ê²½ ì‹œ ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ë°°í¬ í•„ìš”                                              | ë°°í¬ ìœ„í—˜ ì¦ê°€, ë‹¤ìš´íƒ€ì„ ë°œìƒ ê°€ëŠ¥ì„±           |
| **CBT-back-diary ë‹¨ìˆœì„± ì†ì‹¤** | ì›ë˜ ê°„ë‹¨í•˜ê³  ì§‘ì¤‘ëœ ì„œë¹„ìŠ¤ì˜€ë˜ CBT-back-diaryê°€ ë³µì¡í•œ Auth-Serverì— í†µí•©ë˜ëŠ” ê²ƒì´ ë‹¨ì ìœ¼ë¡œ ì¸ì‹ë  ìˆ˜ ìˆìŒ | ì„œë¹„ìŠ¤ íŠ¹í™”ì„± ê°ì†Œ, ë³µì¡ì„± ì¦ê°€                |

### 3.2. ğŸ”— ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë¶„ë¦¬

`Auth-Server`ì™€ `CBT-back-diary`ë¥¼ APIë¥¼ í†µí•´ í†µì‹ í•˜ëŠ” ë³„ë„ ì„œë¹„ìŠ¤ë¡œ ìœ ì§€

```mermaid
graph TB
    subgraph "ğŸŒ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜"
        A[í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜]

        subgraph "ğŸ” Auth-Server ì„œë¹„ìŠ¤"
            B[User Management]
            C[Authentication & Authorization]
            D[User Database]
        end

        subgraph "ğŸ“š CBT-back-diary ì„œë¹„ìŠ¤"
            E[Diary Management]
            F[Diary Database]
        end

        G[API Gateway / Load Balancer]
        H[Service Discovery]
        I[Monitoring & Logging]
    end

    A --> G
    G --> B
    G --> E
    B --> D
    E --> F
    B <--> E
    G --> H
    B --> I
    E --> I

    style A fill:#61dafb,color:#000
    style B fill:#6db33f,color:#fff
    style C fill:#2196f3,color:#fff
    style D fill:#4479a1,color:#fff
    style E fill:#ff9800,color:#fff
    style F fill:#4479a1,color:#fff
    style G fill:#9c27b0,color:#fff
    style H fill:#795548,color:#fff
    style I fill:#607d8b,color:#fff
```

#### âœ… ì¥ì 

| ğŸ’š ì¥ì                    | ğŸ“ ìƒì„¸ ì„¤ëª…                                                                                      | ğŸ¯ ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜                  |
| ------------------------- | ------------------------------------------------------------------------------------------------- | --------------------------------- |
| **ê´€ì‹¬ì‚¬ ë¶„ë¦¬**           | ì¸ì¦/ì‚¬ìš©ì ê´€ë¦¬ì™€ ì¼ê¸° ê¸°ëŠ¥ ê°„ ëª…í™•í•œ ê²½ê³„                                                       | ë„ë©”ì¸ ì „ë¬¸í™”, ì½”ë“œ ì‘ì§‘ë„ í–¥ìƒ   |
| **ë…ë¦½ì  ê°œë°œ/ë°°í¬**      | íŒ€ì´ ê° ì„œë¹„ìŠ¤ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ì‘ì—…, ì—…ë°ì´íŠ¸, ë°°í¬ ê°€ëŠ¥ â†’ ê°œë³„ ì„œë¹„ìŠ¤ì˜ ê°œë°œ ì‚¬ì´í´ ê°€ì†í™”          | ê°œë°œ ì†ë„ í–¥ìƒ, íŒ€ ììœ¨ì„± ì¦ëŒ€    |
| **ê¸°ìˆ  ë‹¤ì–‘ì„±**           | ë‘ ì„œë¹„ìŠ¤ ëª¨ë‘ Spring Bootì´ì§€ë§Œ, íŠ¹ì • ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ì´ë‚˜ ì¥ê¸°ì ìœ¼ë¡œ ì–¸ì–´ê¹Œì§€ë„ ë‹¤ì–‘í™” ê°€ëŠ¥      | ê¸°ìˆ  ì„ íƒì˜ ìœ ì—°ì„±, ìµœì í™” ê°€ëŠ¥ì„± |
| **ë…ë¦½ì  í™•ì¥ì„±**         | ê° ì„œë¹„ìŠ¤ê°€ íŠ¹ì • ë¡œë“œ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ í™•ì¥ ê°€ëŠ¥                                                   | ë¦¬ì†ŒìŠ¤ íš¨ìœ¨ì„±, ë¹„ìš© ìµœì í™”        |
| **ì¥ì•  ê²©ë¦¬**             | í•œ ì„œë¹„ìŠ¤ì˜ ë¬¸ì œê°€ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¥¼ ë‹¤ìš´ì‹œí‚¬ ê°€ëŠ¥ì„± ê°ì†Œ (ë³µì›ë ¥ ì„¤ê³„ ì‹œ)                            | ì‹œìŠ¤í…œ ì•ˆì •ì„± í–¥ìƒ, ê°€ìš©ì„± ê°œì„    |
| **CBT-back-diary ë‹¨ìˆœì„±** | CBT-back-diaryê°€ ëª¨ë“  ì‚¬ìš©ì ê´€ë¦¬ë¥¼ Auth-Serverì— API í˜¸ì¶œë¡œ ìœ„ì„í•˜ì—¬ ì§‘ì¤‘ë˜ê³  ë‹¨ìˆœí•˜ê²Œ ìœ ì§€ ê°€ëŠ¥ | ì„œë¹„ìŠ¤ ì§‘ì¤‘ë„ ìœ ì§€, ë³µì¡ì„± ê´€ë¦¬   |

#### âŒ ë‹¨ì 

| ğŸ”´ ë‹¨ì                      | ğŸ“ ìƒì„¸ ì„¤ëª…                                                                                                                               | âš ï¸ ìœ„í—˜ ìš”ì†Œ                           |
| --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------- |
| **ì„œë¹„ìŠ¤ ê°„ í†µì‹  ì˜¤ë²„í—¤ë“œ** | ì„œë¹„ìŠ¤ ê°„ API í˜¸ì¶œ(ì˜ˆ: DiaryServiceê°€ ì‚¬ìš©ì í† í° ê²€ì¦ì´ë‚˜ ì‚¬ìš©ì ì„¸ë¶€ ì •ë³´ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ Auth-Server í˜¸ì¶œ)ë¡œ ì¸í•œ ë„¤íŠ¸ì›Œí¬ ì§€ì—° ë° ë³µì¡ì„± | ì„±ëŠ¥ ì €í•˜, í†µì‹  ì¥ì•  ìœ„í—˜              |
| **ë°ì´í„° ì¼ê´€ì„± ë„ì „**      | ì—¬ëŸ¬ ì„œë¹„ìŠ¤ì—ì„œ ì°¸ì¡°ë˜ê±°ë‚˜ ë¶€ë¶„ì ìœ¼ë¡œ ì¤‘ë³µë  ìˆ˜ ìˆëŠ” ë°ì´í„°(ì‚¬ìš©ì ì •ë³´ ë“±)ì˜ ì¼ê´€ì„± ìœ ì§€ ë³µì¡ì„±, ìµœì¢… ì¼ê´€ì„± ëª¨ë¸ í•„ìš” ê°€ëŠ¥ì„±             | ë°ì´í„° ë¶ˆì¼ì¹˜, ë™ê¸°í™” ë³µì¡ì„±           |
| **ì¤‘ë³µëœ ëª¨ë¸/DTO**         | `User` ì •ë³´(IDë‚˜ ê¸°ë³¸ í”„ë¡œí•„ ë°ì´í„°ë¼ë„)ê°€ `CBT-back-diary`ì—ì„œ í‘œí˜„ë˜ì–´ì•¼ í•˜ì—¬ ì¤‘ë³µëœ DTOë‚˜ ê³µìœ  í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë°œìƒ ê°€ëŠ¥ì„±        | ì½”ë“œ ì¤‘ë³µ, ë²„ì „ ê´€ë¦¬ ë³µì¡ì„±            |
| **ë¶„ì‚° íŠ¸ëœì­ì…˜**           | ì—¬ëŸ¬ ì„œë¹„ìŠ¤ì— ê±¸ì¹œ íŠ¸ëœì­ì…˜ ê´€ë¦¬ê°€ ëª¨ë†€ë¦¬ìŠ¤ì˜ ë¡œì»¬ íŠ¸ëœì­ì…˜ë³´ë‹¤ í›¨ì”¬ ë³µì¡                                                                  | ë°ì´í„° ì¼ê´€ì„± ìœ„í—˜, êµ¬í˜„ ë³µì¡ì„±        |
| **ìš´ì˜ ë³µì¡ì„±**             | ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ê´€ë¦¬, ëª¨ë‹ˆí„°ë§, ë””ë²„ê¹…ì´ ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ë³´ë‹¤ ë³µì¡, ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬, ë¡œë“œ ë°¸ëŸ°ì‹±, ë³µì›ë ¥ í†µì‹  íŒ¨í„´ í•„ìš”                     | ìš´ì˜ ë¹„ìš© ì¦ê°€, ì¥ì•  ëŒ€ì‘ ë³µì¡ì„±       |
| **API ê³„ì•½ ê´€ë¦¬**           | ì„œë¹„ìŠ¤ ê°„ ì˜ ì •ì˜ë˜ê³  ë²„ì „ ê´€ë¦¬ëœ API í•„ìš”, Auth-Server API ë³€ê²½ì´ CBT-back-diaryë¥¼ ì¤‘ë‹¨ì‹œí‚¬ ìˆ˜ ìˆìŒ                                       | ì¸í„°í˜ì´ìŠ¤ í˜¸í™˜ì„± ìœ„í—˜, ë°°í¬ ì¡°ì • í•„ìš” |
| **ë³´ì•ˆ**                    | ì„œë¹„ìŠ¤ ê°„ í†µì‹  ë³´ì•ˆì´ ì¶”ê°€ì ì¸ ë³µì¡ì„± ê³„ì¸µ ì¶”ê°€                                                                                            | ë³´ì•ˆ ì·¨ì•½ì  ì¦ê°€, ì„¤ì • ë³µì¡ì„±          |

## 4. ğŸ’¡ ê¶Œì¥ì‚¬í•­

```mermaid
graph TB
    A[ì•„í‚¤í…ì²˜ ê²°ì •] --> B{í•µì‹¬ í‰ê°€ ê¸°ì¤€}

    B --> C[ë°ì´í„° ê²°í•©ë„<br/>ğŸ”— ë†’ìŒ]
    B --> D[ê¸°ëŠ¥ ì¤‘ì•™í™”<br/>ğŸ›ï¸ Auth-Server ì„±ìˆ™]
    B --> E[ìš´ì˜ ë³µì¡ì„±<br/>ğŸ“ˆ í˜„ì¬ ê·œëª¨]
    B --> F[ê¸°ìˆ  ìŠ¤íƒ ì •ë ¬<br/>ğŸ› ï¸ í˜¸í™˜ ê°€ëŠ¥]

    C --> G[ëª¨ë†€ë¦¬ìŠ¤ í†µí•© ê¶Œì¥]
    D --> G
    E --> G
    F --> G

    G --> H[Auth-Server ê¸°ë°˜ í†µí•©]

    style A fill:#e3f2fd
    style B fill:#fff3e0
    style C fill:#e8f5e8
    style D fill:#e8f5e8
    style E fill:#e8f5e8
    style F fill:#e8f5e8
    style G fill:#4caf50,color:#fff
    style H fill:#2196f3,color:#fff
```

**ğŸ¯ ê¶Œì¥ì‚¬í•­: Auth-Serverë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ëª¨ë†€ë¦¬ìŠ¤ í†µí•©**

### ğŸ” ê·¼ê±°

1. **ğŸ”— ê°•í•œ ë°ì´í„° ê²°í•©ë„**: `CBT-back-diary`ì˜ `Diary` ê¸°ëŠ¥ì€ ë³¸ì§ˆì ìœ¼ë¡œ `User` ì—”í‹°í‹°ì™€ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì¼ê¸° ìƒì„±, ì¡°íšŒ, ì—…ë°ì´íŠ¸ì™€ ê°™ì€ ì‘ì—…ì€ ê±°ì˜ í•­ìƒ ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸ì™€ ê¶Œí•œ ë¶€ì—¬ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°„ì— ì´ëŸ¬í•œ ê´€ê³„ë¥¼ ê´€ë¦¬í•˜ë©´ API í˜¸ì¶œ, ë°ì´í„° ë™ê¸°í™”, íŠ¸ëœì­ì…˜ ë¬´ê²°ì„± ì¸¡ë©´ì—ì„œ ìƒë‹¹í•œ ë³µì¡ì„±ì´ ë°œìƒí•©ë‹ˆë‹¤.

2. **ğŸ›ï¸ í•µì‹¬ ê¸°ëŠ¥ ì¤‘ì•™í™”**: `Auth-Server`ëŠ” ì‚¬ìš©ì ê´€ë¦¬, ì¸ì¦(OAuth2, JWT), ê¶Œí•œ ë¶€ì—¬ë¥¼ ìœ„í•œ ë” ì„±ìˆ™í•˜ê³  ê¸°ëŠ¥ì´ í’ë¶€í•œ í”Œë«í¼ì„ ì œê³µí•©ë‹ˆë‹¤. `CBT-back-diary`ë¥¼ ì´ ê¸°ì¡´ í”„ë ˆì„ì›Œí¬ì— í†µí•©í•˜ë©´ ì¼ê¸° ê¸°ëŠ¥ì´ ì´ëŸ¬í•œ ê°•ë ¥í•œ ì„œë¹„ìŠ¤ë¥¼ ì§ì ‘ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

3. **ğŸ“ˆ ìš´ì˜ ë³µì¡ì„± ê°ì†Œ**: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ í™•ì¥ì„± ì´ì ì„ ì œê³µí•˜ì§€ë§Œ, í˜„ì¬ ì„¤ì •ì€ ë°€ì ‘í•˜ê²Œ ê´€ë ¨ëœ ë‘ ë„ë©”ì¸ì„ ì‹œì‚¬í•©ë‹ˆë‹¤. ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì˜ˆìƒ ê·œëª¨ì—ì„œëŠ” ì˜ êµ¬ì¡°í™”ëœ ë‹¨ì¼ ëª¨ë†€ë¦¬ìŠ¤ ê´€ë¦¬ê°€ ë¶„ì‚° ì‹œìŠ¤í…œì˜ ë³µì¡ì„±ì„ ê°€ì§„ ë‘ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê´€ë¦¬ë³´ë‹¤ ìš´ì˜ìƒ ë” ê°„ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

4. **ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ ì •ë ¬**: ë‘ í”„ë¡œì íŠ¸ ëª¨ë‘ Spring Bootì™€ MariaDBë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. Spring Boot ë²„ì „(3.2.4ì™€ 3.2.0)ì´ ë§¤ìš° ê°€ê¹ê³  ê°™ì€ ì£¼ìš” ë²„ì „(3.x)ì— ìˆì–´ ëª¨ë†€ë¦¬ìŠ¤ ë‚´ì—ì„œ ì˜ì¡´ì„± ê´€ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

5. **ğŸ”„ ì¤‘ë³µ í•´ê²°**: ëª¨ë†€ë¦¬ìŠ¤ ì ‘ê·¼ ë°©ì‹ì€ `User`ì™€ `AuthProvider` ì—”í‹°í‹° ë° ê´€ë ¨ ë¡œì§ì˜ ì¤‘ë³µì„ ì§ì ‘ í•´ê²°í•©ë‹ˆë‹¤.

6. **ğŸ“Š Auth-Serverì˜ ê¸°ì¡´ ì¼ê¸° ê´€ë ¨ ì—”í‹°í‹°**: Auth-Serverì— `Diary`, `Report`, `DiaryReportLink` ì—”í‹°í‹°ê°€ ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì€ ì´ë¯¸ ìˆœìˆ˜ ì¸ì¦ì„ ë„˜ì–´ì„  ê¸°ëŠ¥ì„ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆê±°ë‚˜ ë°œì „í•˜ê³  ìˆìŒì„ ì‹œì‚¬í•©ë‹ˆë‹¤.

### ğŸš€ í†µí•© ì „ëµ (ëª¨ë†€ë¦¬ìŠ¤ ì„ íƒ ì‹œ)

```mermaid
graph TB
    subgraph "ğŸ“‹ í†µí•© ë¡œë“œë§µ"
        A[ë² ì´ìŠ¤ í”„ë¡œì íŠ¸ ê²°ì •] --> B[Diary ê¸°ëŠ¥ ë³‘í•©]
        B --> C[êµ¬ì„± ì •ë ¬]
        C --> D[ì˜ì¡´ì„± ê´€ë¦¬]
        D --> E[í…ŒìŠ¤íŠ¸ ë° ê²€ì¦]
    end

    subgraph "ğŸ”§ ì„¸ë¶€ ì‘ì—…"
        F[Auth-Serverë¥¼ ë² ì´ìŠ¤ë¡œ ì„ íƒ]
        G[Diary ì—”í‹°í‹° í†µí•©]
        H[DiaryService ë§ˆì´ê·¸ë ˆì´ì…˜]
        I[Repository í†µí•©]
        J[Java 21 í‘œì¤€í™”]
        K[Spring Boot 3.2.4 í†µì¼]
        L[ddl-auto=none ì •ì±…]
        M[ì™¸ë¶€í™”ëœ êµ¬ì„± ì±„íƒ]
    end

    A --> F
    B --> G
    B --> H
    B --> I
    C --> J
    C --> K
    C --> L
    C --> M

    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style C fill:#fff3e0
    style D fill:#e8f5e8
    style E fill:#fce4ec
    style F fill:#4caf50,color:#fff
    style G fill:#ff9800,color:#fff
    style H fill:#ff9800,color:#fff
    style I fill:#ff9800,color:#fff
    style J fill:#2196f3,color:#fff
    style K fill:#2196f3,color:#fff
    style L fill:#2196f3,color:#fff
    style M fill:#2196f3,color:#fff
```

#### ğŸ“¦ ë² ì´ìŠ¤ í”„ë¡œì íŠ¸

- **Auth-Server**ë¥¼ ë² ì´ìŠ¤ í”„ë¡œì íŠ¸ë¡œ ì‚¬ìš© (ë” í¬ê´„ì ì¸ ë³´ì•ˆ ë° ì‚¬ìš©ì ê´€ë¦¬ ì¸í”„ë¼ ë³´ìœ )

#### ğŸ”„ Diary ê¸°ëŠ¥ ë³‘í•©

- **ì—”í‹°í‹° ë¶„ì„**: `CBT-back-diary`ì˜ `Diary` ì—”í‹°í‹°ì™€ `Auth-Server`ì˜ `Diary` ì—”í‹°í‹°ë¥¼ ì‹ ì¤‘íˆ ë¶„ì„í•˜ì—¬ í†µí•©ëœ `Diary` ëª¨ë¸ ê²°ì •
- **ì„œë¹„ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜**: `CBT-back-diary`ì˜ `DiaryService` ë¡œì§ì„ `Auth-Server`ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜
- **ë¦¬í¬ì§€í† ë¦¬ í†µí•©**: Diary ê´€ë ¨ ë¦¬í¬ì§€í† ë¦¬ë¥¼ Auth-Serverì— ì¶”ê°€ ë˜ëŠ” ë³‘í•©

#### âš™ï¸ êµ¬ì„± ì •ë ¬

- **Java 21**ê³¼ **Spring Boot 3.2.4** (ë˜ëŠ” ìµœì‹  ì•ˆì • 3.x ë²„ì „)ë¡œ í‘œì¤€í™”
- **ddl-auto=none** ì •ì±… ì±„íƒ ë° ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ êµ¬í˜„ (Flyway ë˜ëŠ” Liquibase ì‚¬ìš©)
- Auth-Serverì˜ ì™¸ë¶€í™”ëœ êµ¬ì„± ì ‘ê·¼ ë°©ì‹ì„ ëª¨ë¸ë¡œ `application.properties` í†µí•©

#### ğŸ“¦ ì˜ì¡´ì„± ê´€ë¦¬

- `CBT-back-diary`ì˜ í•„ìš”í•œ ì˜ì¡´ì„±ì„ Auth-Serverì˜ `build.gradle`ì— ì¶”ê°€
- `CBT-back-diary`ì˜ `build.gradle`ì€ ì‹¤ì§ˆì ìœ¼ë¡œ ëŒ€ì²´ë¨

### ğŸ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê³ ë ¤ì‚¬í•­ (ëª¨ë†€ë¦¬ìŠ¤ ë¯¸ì„ íƒ ì‹œ)

ê¶Œì¥ì‚¬í•­ì—ë„ ë¶ˆêµ¬í•˜ê³  ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì ‘ê·¼ ë°©ì‹ì„ ì¶”êµ¬í•  ê²½ìš° ë‹¤ìŒì´ ì¤‘ìš”í•©ë‹ˆë‹¤:

```mermaid
graph TB
    subgraph "ğŸ”— ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í•„ìˆ˜ ìš”êµ¬ì‚¬í•­"
        A[API ê³„ì•½ ì •ì˜]
        B[ê³µìœ  ì‚¬ìš©ì ëª¨ë¸]
        C[ì¸ì¦ í”Œë¡œìš°]
        D[ë°ì´í„° ë™ê¸°í™”]
    end

    A --> E[ëª…í™•í•˜ê³  ë²„ì „ ê´€ë¦¬ëœ API]
    B --> F[ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬/DTO]
    C --> G[JWT/OAuth í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬]
    D --> H[ë°ì´í„° ì¼ê´€ì„± ì „ëµ]

    style A fill:#ff5722,color:#fff
    style B fill:#ff5722,color:#fff
    style C fill:#ff5722,color:#fff
    style D fill:#ff5722,color:#fff
    style E fill:#ffebee
    style F fill:#ffebee
    style G fill:#ffebee
    style H fill:#ffebee
```

- **ğŸ“ API ê³„ì•½**: Auth-Serverì™€ CBT-back-diary ê°„ ì‚¬ìš©ì ì¸ì¦, ê¶Œí•œ ë¶€ì—¬, í•„ìš”í•œ ì‚¬ìš©ì ì •ë³´ ê²€ìƒ‰ì„ ìœ„í•œ ëª…í™•í•˜ê³  ë²„ì „ ê´€ë¦¬ëœ API ê³„ì•½ ì •ì˜
- **ğŸ‘¥ ê³µìœ  ì‚¬ìš©ì ëª¨ë¸**: ë¶ˆì¼ì¹˜ë¥¼ í”¼í•˜ê¸° ìœ„í•œ ì‚¬ìš©ì í‘œí˜„ì„ ìœ„í•œ ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ ë˜ëŠ” ëª…í™•í•œ DTO ìƒì„±
- **ğŸ” ì¸ì¦ í”Œë¡œìš°**: CBT-back-diaryì— í† í° ê²€ì¦ ë° ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸ë¥¼ ìœ„í•´ Auth-Serverì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ê°•ë ¥í•œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë¡œì§ êµ¬í˜„
- **ğŸ”„ ë°ì´í„° ë™ê¸°í™”**: CBT-back-diaryì—ì„œ ë¡œì»¬ë¡œ í•„ìš”í•  ìˆ˜ ìˆëŠ” ì‚¬ìš©ì ë°ì´í„° ì²˜ë¦¬ ì „ëµ ì‹ ì¤‘íˆ ê³ ë ¤

### ğŸ¯ ê²°ë¡ 

ì‚¬ìš©ì ë°ì´í„° ì£¼ë³€ì˜ ê¸´ë°€í•œ ê²°í•©ê³¼ Auth-Serverì˜ ê¸°ì¡´ í¬ê´„ì  ê¸°ëŠ¥ì„ ê³ ë ¤í•  ë•Œ, **ëª¨ë†€ë¦¬ìŠ¤ë¡œì˜ í†µí•©ì´ í˜„ì¬ ë‹¨ê³„ì—ì„œ ì´ ë‘ êµ¬ì„± ìš”ì†Œì— ëŒ€í•´ ë” ì‹¤ìš©ì ì´ê³  íš¨ìœ¨ì ì¸ ì ‘ê·¼ ë°©ì‹**ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.

---

> ğŸ’¡ **ì°¸ê³ **: ì´ ê¶Œì¥ì‚¬í•­ì€ í˜„ì¬ í”„ë¡œì íŠ¸ ê·œëª¨ì™€ íŒ€ ì—­ëŸ‰ì„ ê³ ë ¤í•œ ê²ƒì´ë©°, í–¥í›„ ì‹œìŠ¤í…œì´ ì„±ì¥í•˜ê³  íŒ€ì´ í™•ì¥ë˜ë©´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œì˜ ë¶„í•´ë¥¼ ì¬ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
