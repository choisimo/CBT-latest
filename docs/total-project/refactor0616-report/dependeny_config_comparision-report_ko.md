# ì¢…ì†ì„± ë° êµ¬ì„± ë¹„êµ ë³´ê³ ì„œ

> ğŸ“‹ **ë³´ê³ ì„œ ê°œìš”**  
> ë³¸ ë³´ê³ ì„œëŠ” `Auth-Server`ì™€ `CBT-back-diary` í”„ë¡œì íŠ¸ì˜ ë¹Œë“œ êµ¬ì„± ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ì„±ì„ í†µí•©í•˜ê³  ë¹„êµí•©ë‹ˆë‹¤.

---

## ğŸ“Œ ëª©ì°¨

- [I. ë¹Œë“œ ë° ì¢…ì†ì„± ë¹„êµ](#i-ë¹Œë“œ-ë°-ì¢…ì†ì„±-ë¹„êµ)
- [II. êµ¬ì„± ì†ì„± ë¹„êµ](#ii-êµ¬ì„±-ì†ì„±-ë¹„êµ)
- [ê²°ê³¼ ìš”ì•½](#ê²°ê³¼-ìš”ì•½)

---

## I. ë¹Œë“œ ë° ì¢…ì†ì„± ë¹„êµ

### ğŸ”§ ì£¼ìš” ê¸°ìˆ  ìŠ¤íƒ ë¹„êµ

| êµ¬ì„± ìš”ì†Œ                 | Auth-Server              | CBT-back-diary           | ë¹„ê³                                     |
| :------------------------ | :----------------------- | :----------------------- | :-------------------------------------- |
| **Java ë²„ì „**             | â˜€ï¸ 21                    | âš¡ 17                    | Java ë²„ì „ ì°¨ì´ ì¡´ì¬                     |
| **Spring Boot**           | ğŸŒ¸ 3.2.4                 | ğŸŒ¸ 3.2.0                 | ë§ˆì´ë„ˆ ë²„ì „ ì°¨ì´. ë‘˜ ë‹¤ Spring Boot 3.x |
| **ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„** | ğŸ—„ï¸ `mariadb-java-client` | ğŸ—„ï¸ `mariadb-java-client` | ë‘˜ ë‹¤ MariaDB ì‚¬ìš©                      |
| **Spring Data JPA**       | âœ… í¬í•¨                  | âœ… í¬í•¨                  | ì¼ê´€ì„± ìœ ì§€                             |
| **Spring Security**       | ğŸ” í¬í•¨                  | ğŸ” í¬í•¨                  | ì¼ê´€ì„± ìœ ì§€                             |

### ğŸ“Š ê³ ê¸‰ ê¸°ëŠ¥ ë¹„êµ

```mermaid
graph TB
    subgraph "Auth-Server ê¸°ëŠ¥"
        A[QueryDSL] --> D[ê³ ê¸‰ ì¿¼ë¦¬]
        B[Redis] --> E[ìºì‹±/ì„¸ì…˜]
        C[JWT] --> F[í† í° ì¸ì¦]
    end

    subgraph "CBT-back-diary ê¸°ëŠ¥"
        G[ê¸°ë³¸ JPA] --> H[í‘œì¤€ CRUD]
        I[ê¸°ë³¸ Security] --> J[ê¸°ë³¸ ë³´ì•ˆ]
    end

    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style G fill:#fff3e0
    style I fill:#fff3e0
```

### ğŸ” ìƒì„¸ ì¢…ì†ì„± ë¶„ì„

| ê¸°ëŠ¥                 | Auth-Server                         | CBT-back-diary | ì˜í–¥ë„                          |
| :------------------- | :---------------------------------- | :------------- | :------------------------------ |
| **QueryDSL**         | âœ… `com.querydsl:querydsl-jpa`      | âŒ ì—†ìŒ        | ğŸ”´ ë†’ìŒ - ë°ì´í„° ì ‘ê·¼ ë°©ì‹ ì°¨ì´ |
| **Redis í´ë¼ì´ì–¸íŠ¸** | âœ… `spring-boot-starter-data-redis` | âŒ ì—†ìŒ        | ğŸ”´ ë†’ìŒ - ìºì‹± ì „ëµ ì°¨ì´        |
| **JWT ë¼ì´ë¸ŒëŸ¬ë¦¬**   | âœ… `io.jsonwebtoken:jjwt-*`         | âŒ ì—†ìŒ        | ğŸ”´ ë†’ìŒ - ì¸ì¦ ë°©ì‹ ì°¨ì´        |
| **Lombok**           | âœ… í¬í•¨                             | âœ… í¬í•¨        | ğŸŸ¢ ë‚®ìŒ - ì¼ê´€ì„±                |

---

## II. êµ¬ì„± ì†ì„± ë¹„êµ

### ğŸŒ ì„œë²„ ë° ë„¤íŠ¸ì›Œí¬ ì„¤ì •

```mermaid
graph LR
    A[Auth-Server<br/>Port: 7078] --> C[Database]
    B[CBT-back-diary<br/>Port: 8080] --> C

    style A fill:#e3f2fd
    style B fill:#f1f8e9
    style C fill:#fff3e0
```

### ğŸ“Š êµ¬ì„± ì†ì„± ìƒì„¸ ë¹„êµ

| ì†ì„±            | Auth-Server      | CBT-back-diary                             | ë³´ì•ˆ ë“±ê¸‰    |
| :-------------- | :--------------- | :----------------------------------------- | :----------- |
| **ì„œë²„ í¬íŠ¸**   | `7078`           | `8080`                                     | ğŸŸ¡ ì¤‘ê°„      |
| **DB URL**      | ğŸ”’ ì™¸ë¶€í™”ë¨      | `jdbc:mariadb://localhost:3306/emotion_db` | ğŸ”´ ë†’ìŒ      |
| **DB ì‚¬ìš©ìëª…** | ğŸ”’ ì™¸ë¶€í™”ë¨      | `root`                                     | ğŸ”´ ë†’ìŒ      |
| **DB ë¹„ë°€ë²ˆí˜¸** | ğŸ”’ ì™¸ë¶€í™”ë¨      | `password` (í•˜ë“œì½”ë”©)                      | ğŸ”´ ë§¤ìš° ë†’ìŒ |
| **DB ë°©ì–¸**     | `MariaDBDialect` | `MariaDBDialect`                           | ğŸŸ¢ ë‚®ìŒ      |

### ğŸ—ï¸ JPA êµ¬ì„± ì „ëµ

```mermaid
flowchart TD
    A[JPA êµ¬ì„±] --> B[Auth-Server]
    A --> C[CBT-back-diary]

    B --> D[ddl-auto: none<br/>ì™¸ë¶€ ìŠ¤í‚¤ë§ˆ ê´€ë¦¬]
    B --> E[show-sql: ê¸°ë³¸ê°’]

    C --> F[ddl-auto: update<br/>ìë™ ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸]
    C --> G[show-sql: true<br/>SQL ë¡œê¹… í™œì„±í™”]

    style D fill:#ffebee
    style F fill:#e8f5e8
    style E fill:#f5f5f5
    style G fill:#e3f2fd
```

### ğŸ”§ ì¸í”„ë¼ êµ¬ì„± ì°¨ì´ì 

| êµ¬ì„± ìš”ì†Œ           | Auth-Server                    | CBT-back-diary | í†µí•© ê³ ë ¤ì‚¬í•­          |
| :------------------ | :----------------------------- | :------------- | :--------------------- |
| **Redis êµ¬ì„±**      | âœ… êµ¬ì„±ë¨                      | âŒ ì—†ìŒ        | Redis ì˜ì¡´ì„± ì¶”ê°€ í•„ìš” |
| **ì™¸ë¶€ êµ¬ì„±**       | âœ… `spring.config.import` ì‚¬ìš© | âŒ ì—†ìŒ        | ë³´ì•ˆ ê°•í™” í•„ìš”         |
| **í™˜ê²½ë³„ í”„ë¡œíŒŒì¼** | âœ… ì§€ì›                        | â“ ë¶ˆëª…í™•      | í”„ë¡œë•ì…˜ ë°°í¬ ê³ ë ¤     |

---

## ğŸ¯ ê²°ê³¼ ìš”ì•½

### ğŸ”´ ì£¼ìš” ì°¨ì´ì 

#### 1. **ì¢…ì†ì„± ë° ê¸°ìˆ  ì°¨ì´**

```mermaid
pie title ê¸°ìˆ  ìŠ¤íƒ ì°¨ì´ ë¶„í¬
    "ê³µí†µ ê¸°ìˆ " : 60
    "Auth-Server ì „ìš©" : 30
    "CBT-back-diary ì „ìš©" : 10
```

- **Java ë²„ì „**: Auth-Server (Java 21) vs CBT-back-diary (Java 17)
- **Spring Boot**: ë§ˆì´ë„ˆ ë²„ì „ ì°¨ì´ (3.2.4 vs 3.2.0)
- **ê³ ê¸‰ ê¸°ëŠ¥**: Auth-Serverê°€ QueryDSL, Redis, JWT í™œìš©

#### 2. **êµ¬ì„± ê´€ë¦¬ ë°©ì‹**

| ì¸¡ë©´           | Auth-Server      | CBT-back-diary     | ê¶Œì¥ì‚¬í•­              |
| :------------- | :--------------- | :----------------- | :-------------------- |
| **ë³´ì•ˆì„±**     | ğŸŸ¢ ë†’ìŒ (ì™¸ë¶€í™”) | ğŸ”´ ë‚®ìŒ (í•˜ë“œì½”ë”©) | Auth-Server ë°©ì‹ ì±„íƒ |
| **ìš´ì˜ì„±**     | ğŸŸ¢ ìš°ìˆ˜          | ğŸ”´ ë¶€ì¡±            | í™˜ê²½ë³„ êµ¬ì„± ë¶„ë¦¬      |
| **ìœ ì§€ë³´ìˆ˜ì„±** | ğŸŸ¢ ìš°ìˆ˜          | ğŸ”´ ë¶€ì¡±            | êµ¬ì„± ì™¸ë¶€í™” í•„ìš”      |

### ğŸ”„ í†µí•©ì„ ìœ„í•œ ê³ ë ¤ì‚¬í•­

#### ì¦‰ì‹œ í•´ê²° í•„ìš”

1. **Java ë²„ì „ í†µì¼** - ë²„ì „ í˜¸í™˜ì„± í™•ì¸
2. **ë³´ì•ˆ êµ¬ì„± ê°•í™”** - CBT-back-diary ë³´ì•ˆ ì„¤ì • ê°œì„ 
3. **ì¢…ì†ì„± ì •ë ¬** - Redis, JWT ë“± ê³µí†µ ê¸°ìˆ  ìŠ¤íƒ êµ¬ì„±

#### ì¤‘ì¥ê¸° ê³„íš

1. **ìŠ¤í‚¤ë§ˆ ê´€ë¦¬ ì „ëµ** - `ddl-auto` ì •ì±… í†µì¼
2. **ì¸í”„ë¼ í†µí•©** - ê³µí†µ Redis, ë°ì´í„°ë² ì´ìŠ¤ í´ëŸ¬ìŠ¤í„°
3. **êµ¬ì„± ê´€ë¦¬** - í†µí•© í™˜ê²½ë³„ êµ¬ì„± ì „ëµ

### ğŸ’¡ í†µí•© ê¶Œì¥ì‚¬í•­

```mermaid
graph TD
    A[í˜„ì¬ ìƒíƒœ] --> B{í†µí•© ì „ëµ}
    B --> C[ë‹¨ê³„ì  í†µí•©]
    B --> D[ì™„ì „ ì¬êµ¬ì„±]

    C --> E[Auth-Server ê¸°ë°˜ í™•ì¥]
    C --> F[ì ì§„ì  ê¸°ëŠ¥ ì´ê´€]

    D --> G[ìƒˆë¡œìš´ í†µí•© ì•„í‚¤í…ì²˜]
    D --> H[ê³µí†µ í”Œë«í¼ êµ¬ì¶•]

    style A fill:#ffebee
    style C fill:#e8f5e8
    style D fill:#e3f2fd
```

> âš ï¸ **ì¤‘ìš”**: ë‘ ì‹œìŠ¤í…œì˜ ê¸°ìˆ  ì„ íƒê³¼ êµ¬ì„± ê´€ë¦¬ ë°©ì‹ì˜ ì°¨ì´ëŠ” í†µí•© ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ë°˜ë“œì‹œ í•´ê²°í•´ì•¼ í•  í•µì‹¬ ê³¼ì œì…ë‹ˆë‹¤.

---

**ğŸ“… ì‘ì„±ì¼**: 2024ë…„ 6ì›” 16ì¼  
**ğŸ” ë¶„ì„ ë²”ìœ„**: ë¹Œë“œ êµ¬ì„±, ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ì„±, ì¢…ì†ì„± ê´€ë¦¬  
**ğŸ“Š ë°ì´í„° ì†ŒìŠ¤**: Auth-Server ëª…ì„¸, CBT-back-diary í”„ë¡œì íŠ¸ íŒŒì¼
